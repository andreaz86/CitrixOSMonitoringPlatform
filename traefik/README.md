# Traefik Configuration

This directory contains the Traefik configuration for the monitoring platform. Traefik acts as a reverse proxy and load balancer, handling SSL/TLS termination and routing requests to the appropriate services.

## Service Routing

### Grafana Reverse Proxy

Traefik provides reverse proxy functionality for Grafana with the following features:

- Secure access via HTTPS on port 443
- Automatic SSL/TLS termination
- Path-based routing to Grafana service
- Headers sanitization and security middleware

### Configuration Repository (/repo)

Traefik also serves as a secure endpoint for distributing uberAgent and Telegraf configurations:

- Access path: `https://yourdomain.com/repo`


## Certificate Management

By default, Traefik uses SSL certificates generated by the sidecar service, which are stored in the `/certs` directory:
- `server.crt`: The SSL certificate
- `server.key`: The private key

### Using Custom Certificates

To use your own certificates instead of the auto-generated ones:

1. Place your certificates in the `/certs` directory:
   ```bash
   /certs/
   ├── server.crt    # Your SSL certificate
   └── server.key    # Your private key
   ```

## Configuration Structure

```
traefik/
├── conf/
│   ├── middleware.yaml    # Middleware configurations (headers, auth, etc.)
│   ├── routers.yaml      # Router rules and service bindings
│   ├── services.yaml     # Backend service definitions
│   ├── tls.yaml         # TLS/SSL configuration
│   └── traefik.yaml     # Main Traefik configuration
```

### Key Files

- `middleware.yaml`: Defines middleware chains for security headers, authentication, and other request modifications
- `routers.yaml`: Contains routing rules that determine how requests are handled
- `services.yaml`: Defines backend services and their configurations
- `tls.yaml`: SSL/TLS configuration and certificate settings
- `traefik.yaml`: Main Traefik configuration file with global settings

## Security Considerations

- Always use strong SSL/TLS configurations with modern cipher suites
- Regularly update certificates before expiration
- When using Let's Encrypt, ensure your email address is valid for expiration notifications
- Consider implementing rate limiting for public endpoints
- Use secure headers middleware for additional security

